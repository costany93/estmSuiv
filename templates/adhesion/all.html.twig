{% extends "base.html.twig" %}

{% block body %}
    <div class="container">
        {% include "shared/_headerClubText.html.twig" %}
        {% include "shared/_clubpageheader.html.twig" with {'title': 'Traiter les demandes d\'adhesion et de sorties du club'} %}
        {% include "shared/_navpilclub.html.twig" with {'slug': club.slug}%}
        <h4 class="mt-3 text-center">Veuillez traiter les demandes d'entrée et de sorti du club</h4>
        <table class="table table-bordered table-striped mt-3">
            <thead>
                <th>Nom</th>
                <th>Prénom</th>
                <th>Motif d'entrée ou de sorti du club</th>
                <th>Action</th>
            </thead>
            <tbody>
                {% for adhesion in club.memberships %}
                    {% set personne = adhesion.etudiant.personne %}
                    <tr {% if adhesion.state == 0 %}class="table-danger" 
                        {% else %}
                            class="table-success"
                    {% endif %}
                    >
                        <td>{{personne.fistname}}</td>
                        <td>{{personne.lastname}}</td>
                        <td>{{adhesion.content}}</td>
                        <td>
                            {% if adhesion.state == false %}
                                <a href="{{path('club_quit_etudiant',{id: adhesion.etudiant.id})}}" class="btn btn-danger">Sortir du club</a>
                            {% else %}
                                <a href="{{path('club_check_etudiant',{id: adhesion.etudiant.id})}}" class="btn btn-success">Faire adhérer au club</a>
                            {% endif %}
                            
                        </td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
{% endblock %}